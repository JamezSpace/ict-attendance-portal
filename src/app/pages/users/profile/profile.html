<h1 class="capitalize pt-7">profile</h1>
<p class="mt-2">View all your personal details here</p>

<div class="grid-container">
    <section class="personal flex flex-col items-center gap-3.5 pl-5 pr-10 py-2 rounded-2xl my-2">
        <div class="profile-pic w-50">
            <img [src]="user_profile()?.avatar || '/user.svg'" alt="profile picture of user"
                class="aspect-square w-full rounded-[50%] object-cover">
            <button (click)="changeProfilePic()">
                <input type="file" (change)="onFileSelected($event)" accept="image/*"
                    class="opacity-1 w-full h-full absolute" />

                @if (loading()) {
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"
                    class="pointer-events-none">
                    <rect width="24" height="24" fill="none" />
                    <path fill="currentColor"
                        d="M15.45 13.4q-.15 1.325-1.125 2.213T12 16.5q-.2 0-.4-.025t-.4-.075t-.425 0t-.375.2q-.275.275-.2.663t.425.512t.688.175T12 18q1.975 0 3.4-1.337t1.55-3.313l.225.2q.225.2.525.2t.5-.2q.225-.225.238-.537t-.213-.538L16.95 11.2q-.275-.275-.7-.275t-.7.275l-1.275 1.275q-.225.225-.225.525t.225.525t.525.225t.525-.225zm-8.4-.75l-.225-.2q-.225-.2-.525-.2t-.5.2q-.225.225-.237.538t.212.537L7.05 14.8q.275.275.7.275t.7-.275l1.275-1.275Q9.95 13.3 9.95 13t-.225-.525t-.525-.225t-.525.225l-.125.125q.15-1.325 1.125-2.212T12 9.5q.2 0 .4.025t.4.075t.425 0t.375-.2q.275-.275.2-.663t-.425-.512t-.687-.175T12 8q-1.975 0-3.4 1.337T7.05 12.65M4 21q-.825 0-1.412-.587T2 19V7q0-.825.588-1.412T4 5h3.15L8.4 3.65q.275-.3.663-.475T9.875 3h4.25q.425 0 .813.175t.662.475L16.85 5H20q.825 0 1.413.588T22 7v12q0 .825-.587 1.413T20 21zm0-2h16V7h-4.05l-1.825-2h-4.25L8.05 7H4zm8-6" />
                </svg>
                } @else {
                <mat-spinner [diameter]="15" class="mx-auto"></mat-spinner>
                }
            </button>
        </div>
        <div class="right py-3.5 w-full text-center">
            @if (user_profile()) {
            <h2 class="mb-3 capitalize big-text">{{ user_profile()?.firstName + " " + user_profile()?.lastName }}
            </h2>
            <p class="capitalize">{{ user_profile()?.departmentalRole }}</p>
            }
        </div>
    </section>

    <section class="personal-expanded py-10">
        <div class="flex justify-between items-start">
            <h2 class="capitalize mb-8.5">personal information</h2>
            <button class="p-2 rounded-[50%] border border-transparent hover:border-black"
                (click)="openUpdateUserDialog()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                    <rect width="24" height="24" fill="none" />
                    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="1.25">
                        <path
                            d="M9.533 11.15A1.82 1.82 0 0 0 9 12.438V15h2.578c.483 0 .947-.192 1.289-.534l7.6-7.604a1.82 1.82 0 0 0 0-2.577l-.751-.751a1.82 1.82 0 0 0-2.578 0z" />
                        <path
                            d="M21 12c0 4.243 0 6.364-1.318 7.682S16.242 21 12 21s-6.364 0-7.682-1.318S3 16.242 3 12s0-6.364 1.318-7.682S7.758 3 12 3" />
                    </g>
                </svg>
            </button>
        </div>
        <article class="grid gap-x-3.5 gap-y-5">
            <div class="field">
                <label for="">name</label>

                <p>{{ user_profile()?.firstName + " " + user_profile()?.lastName }}</p>
            </div>
            <div class="field">
                <label for="">email address</label>
                <p class="email">{{ user_profile()?.email }}</p>
            </div>
            <div class="field">
                <label for="">province</label>

                <p>{{ user_profile()?.province }}</p>
            </div>
            <div class="field">
                <label for="">region</label>

                <p>{{ user_profile()?.region }}</p>
            </div>
            @if (user_profile()?.subunitId) {
            <div class="field">
                <label for="">subunit</label>

                <p>{{ user_profile_with_subunit()?.subunit?.name }}</p>
            </div>
            }
            <div class="field">
                <label for="">role</label>

                <p>{{ user_profile()?.departmentalRole }}</p>
            </div>
        </article>
        <div class="my-flex gap-3 5 mt-14">
            <!-- <button class="my-button" (click)="generateId()">Generate My ID card</button> -->

            <button class="my-button w-full" (click)="generateId()">Generate My ID card</button>
        </div>
    </section>

</div>